{"remainingRequest":"C:\\Users\\PowerThunder\\Desktop\\xmy\\vuetravel\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\PowerThunder\\Desktop\\xmy\\vuetravel\\src\\views\\User\\children\\UserArticle.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\PowerThunder\\Desktop\\xmy\\vuetravel\\src\\views\\User\\children\\UserArticle.vue","mtime":1583230001000},{"path":"C:\\Users\\PowerThunder\\Desktop\\xmy\\vuetravel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\PowerThunder\\Desktop\\xmy\\vuetravel\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVXNlckFydGljbGUiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhcnRpY2xlczogW3t9XSwKICAgICAgY3VycmVudFBhZ2U6IDEsCiAgICAgIGFsbFBhZ2U6IDAsCiAgICAgIHBhZ2VzaXplOiA0LAogICAgICBzaG93OiB0cnVlCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIC8vIOafpeivoueUqOaIt+aUu+eVpQogICAgdGhpcy4kYXhpb3MKICAgICAgLnBvc3QoImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC91c2VyQ2VudGVyL3VzZXJBcnRpY2xlIikKICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLmRhdGEuZGF0YSkgewogICAgICAgICAgdGhpcy5zaG93ID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuYXJ0aWNsZXMgPSByZXMuZGF0YS5kYXRhOwogICAgICAgICAgdGhpcy5hbGxQYWdlID0gcmVzLmRhdGEuZGF0YS5sZW5ndGg7CgogICAgICAgICAgY29uc29sZS5sb2codGhpcy5hcnRpY2xlcyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuc2hvdyA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSkKICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgY29uc29sZS5sb2coIumUmeivr+S/oeaBryIgKyBlcnIpOwogICAgICB9KQogICAgICAuZmluYWxseShmdW5jdGlvbigpIHsKICAgICAgICAvLyBhbHdheXMgZXhlY3V0ZWQKICAgICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRQaWMocGljKSB7CiAgICAgIC8v57uZ5Zu+54mH5ZCN5Yqg5LiK5pyN5Yqh5Zmo56uv6K6/6Zeu6Lev5b6ECiAgICAgIGlmIChwaWMgPT0gImNvdmVyIiB8fCBwaWMgPT0gbnVsbCkgewogICAgICAgIHBpYyA9ICJwcmltYXJ5Q292ZXIuanBnIjsKICAgICAgfQogICAgICBsZXQgcGF0aCA9ICJodHRwOi8vbG9jYWxob3N0OjMwMDAvY292ZXJQaWMvIiArIHBpYzsKICAgICAgcmV0dXJuIHBhdGg7CiAgICB9LAogICAgZ2V0SGVhZFBpYyhwaWMpIHsKICAgICAgLy/nu5nlm77niYflkI3liqDkuIrmnI3liqHlmajnq6/orr/pl67ot6/lvoQKICAgICAgbGV0IHBhdGggPSAiIjsKICAgICAgaWYgKHBpYyA9PSBudWxsIHx8IHBpYyA9PSAiIiB8fCBwaWMgPT0gImhlYWRQaWMiKSB7CiAgICAgICAgcGljID0gInByaW1hcnlIZWFkLmpwZWciOwogICAgICB9CiAgICAgIHBhdGggPSAiaHR0cDovL2xvY2FsaG9zdDozMDAwL3VwbG9hZEhlYWRQaWMvIiArIHBpYzsKICAgICAgcmV0dXJuIHBhdGg7CiAgICB9LAogICAgZ28odHlwZSwgaWQpIHsKICAgICAgdmFyIHN0cmF0ZWd5ID0geyB0eXBlLCBpZCB9OwogICAgICB2YXIgaW5mbyA9IEpTT04uc3RyaW5naWZ5KHN0cmF0ZWd5KTsKICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgiaW5mbyIsIGluZm8pOwogICAgICB3aW5kb3cub3BlbigiL2luZGV4L0ZWc3RyYXRlZ3kiKTsKICAgIH0sCiAgICBjdXJyZW50X2NoYW5nZShjdXJyZW50UGFnZSkgewogICAgICB0aGlzLmN1cnJlbnRQYWdlID0gY3VycmVudFBhZ2U7CiAgICB9LAogICAgZGVsQXJ0aWNsZSh0eXBlLCBzdHJhdGVneUlkKSB7CiAgICAgIHRoaXMuJGF4aW9zCiAgICAgICAgLnBvc3QoImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC91c2VyQ2VudGVyL2RlbEFydGljbGUiLCB7CiAgICAgICAgICB0eXBlOiB0eXBlLAogICAgICAgICAgc3RyYXRlZ3lJZDogc3RyYXRlZ3lJZAogICAgICAgIH0pCiAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICLliKDpmaTmlLvnlaXmiJDlip/vvIEiLAogICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIKICAgICAgICAgIH0pOwogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmFydGljbGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmFydGljbGVzW2ldLnN0cmF0ZWd5SWQgPT0gc3RyYXRlZ3lJZCkgewogICAgICAgICAgICAgIHRoaXMuYXJ0aWNsZXMuc3BsaWNlKGksIDEpOwogICAgICAgICAgICAgIHRoaXMuYWxsUGFnZSA9IHRoaXMuYXJ0aWNsZXMubGVuZ3RoOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodGhpcy5hcnRpY2xlcy5sZW5ndGggPT0gMCkgewogICAgICAgICAgICB0aGlzLnNob3cgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnIgPT4gewogICAgICAgICAgY29uc29sZS5sb2coIumUmeivr+S/oeaBryIgKyBlcnIpOwogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogIuWHuumUmeWVpu+8geWIoOmZpOWksei0pe+8gSIsCiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIKICAgICAgICAgIH0pOwogICAgICAgIH0pCiAgICAgICAgLmZpbmFsbHkoZnVuY3Rpb24oKSB7CiAgICAgICAgICAvLyBhbHdheXMgZXhlY3V0ZWQKICAgICAgICB9KTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["UserArticle.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserArticle.vue","sourceRoot":"src/views/User/children","sourcesContent":["<template>\n  <div>\n    <div v-if=\"show\">\n      <div class=\"card-deck flex-column\" id=\"article\">\n        <div\n          class=\"card d-flex flex-row mb-2 shadow-sm p-3 bg-white rounded  \"\n          v-for=\"article in articles.slice(\n            (currentPage - 1) * pagesize,\n            currentPage * pagesize\n          )\"\n          :key=\"article.strategyId\"\n        >\n          <img\n            class=\"card-img-top\"\n            :src=\"getPic(article.cover)\"\n            alt=\"article image\"\n          />\n          <div class=\"unread\" v-if=\"article.ssStutas == -4\">\n            <i class=\"el-icon-lock\"></i>\n          </div>\n          <div class=\"card-body\">\n            <a\n              @click=\"go(article.type, article.strategyId)\"\n              class=\"card-title\"\n              style=\"cursor:pointer;\"\n              >{{ article.title }} {{ article.ssStatus }}</a\n            >\n            <el-button\n              type=\"danger\"\n              icon=\"el-icon-delete\"\n              @click=\"delArticle(article.type, article.strategyId)\"\n              circle\n              class=\"float-right\"\n              id=\"delBtn\"\n            ></el-button>\n            <p\n              class=\"card-text overflow-hidden\"\n              style=\"display:-webkit-box;-webkit-line-clamp:3; -webkit-box-orient:vertical; overflow:hidden;height:100px;\"\n              v-html=\"article.ssInfo\"\n            ></p>\n            <p class=\"text-muted\">\n              <i class=\"fa fa-map-marker mr-2\" aria-hidden=\"true\">{{\n                article.cityName\n              }}</i>\n              <i class=\"el-icon-star-off mr-2\">{{ article.ssCollectionNum }}</i>\n              <i\n                class=\"fa fa-thumbs-o-up mr-2 float-right\"\n                aria-hidden=\"true\"\n                >{{ article.ssLikeNum }}</i\n              >\n            </p>\n          </div>\n        </div>\n      </div>\n      <!-- 分页 -->\n      <div class=\"block\">\n        <el-pagination\n          :page-size=\"pagesize\"\n          :pager-count=\"11\"\n          layout=\"prev, pager, next\"\n          :total=\"allPage\"\n          @current-change=\"current_change\"\n        ></el-pagination>\n      </div>\n    </div>\n    <div v-else>\n      <h3>快去分享你的快乐吧~</h3>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  name: \"UserArticle\",\n  data() {\n    return {\n      articles: [{}],\n      currentPage: 1,\n      allPage: 0,\n      pagesize: 4,\n      show: true\n    };\n  },\n  created() {\n    // 查询用户攻略\n    this.$axios\n      .post(\"http://localhost:3000/userCenter/userArticle\")\n      .then(res => {\n        if (res.data.data) {\n          this.show = true;\n          this.articles = res.data.data;\n          this.allPage = res.data.data.length;\n\n          console.log(this.articles);\n        } else {\n          this.show = false;\n        }\n      })\n      .catch(err => {\n        console.log(\"错误信息\" + err);\n      })\n      .finally(function() {\n        // always executed\n      });\n  },\n  methods: {\n    getPic(pic) {\n      //给图片名加上服务器端访问路径\n      if (pic == \"cover\" || pic == null) {\n        pic = \"primaryCover.jpg\";\n      }\n      let path = \"http://localhost:3000/coverPic/\" + pic;\n      return path;\n    },\n    getHeadPic(pic) {\n      //给图片名加上服务器端访问路径\n      let path = \"\";\n      if (pic == null || pic == \"\" || pic == \"headPic\") {\n        pic = \"primaryHead.jpeg\";\n      }\n      path = \"http://localhost:3000/uploadHeadPic/\" + pic;\n      return path;\n    },\n    go(type, id) {\n      var strategy = { type, id };\n      var info = JSON.stringify(strategy);\n      sessionStorage.setItem(\"info\", info);\n      window.open(\"/index/FVstrategy\");\n    },\n    current_change(currentPage) {\n      this.currentPage = currentPage;\n    },\n    delArticle(type, strategyId) {\n      this.$axios\n        .post(\"http://localhost:3000/userCenter/delArticle\", {\n          type: type,\n          strategyId: strategyId\n        })\n        .then(res => {\n          this.$message({\n            showClose: true,\n            message: \"删除攻略成功！\",\n            type: \"success\"\n          });\n          for (var i = 0; i < this.articles.length; i++) {\n            if (this.articles[i].strategyId == strategyId) {\n              this.articles.splice(i, 1);\n              this.allPage = this.articles.length;\n            }\n          }\n          if (this.articles.length == 0) {\n            this.show = false;\n          }\n        })\n        .catch(err => {\n          console.log(\"错误信息\" + err);\n          this.$message({\n            showClose: true,\n            message: \"出错啦！删除失败！\",\n            type: \"error\"\n          });\n        })\n        .finally(function() {\n          // always executed\n        });\n    }\n  }\n};\n</script>\n<style scoped>\n.unread {\n  width: 825px;\n  height: 210px;\n  background: rgba(19, 19, 19, 0.5);\n  margin: 8px 0px;\n  margin-top: 0;\n  border-radius: 5px;\n  position: absolute;\n  top: 0;\n  left: 0;\n  font-size: 100px;\n}\n.unread i {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  color: rgb(246, 245, 236);\n}\n.unread:hover {\n  background: rgba(0, 0, 0, 0.5);\n}\nh3 {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  color: #ccc;\n}\n.block {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translate(-50%, 0);\n}\n#article img:first-child {\n  width: 13rem;\n  height: 11rem;\n}\n.card-body {\n  padding-bottom: 0;\n  width: 10rem;\n  height: 5rem;\n}\n.text-muted {\n  margin: 0;\n}\n/* .text-muted img {\n  width: 20px;\n  height: 20px;\n} */\n.card {\n  color: #666;\n}\n.card a {\n  font-size: 20px;\n  color: #333;\n}\n.card:hover a {\n  color: #ff9d00;\n}\n#delBtn {\n  position: relative;\n  top: -1rem;\n}\n</style>\n"]}]}