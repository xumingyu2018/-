{"remainingRequest":"C:\\Users\\PowerThunder\\Desktop\\xmy\\vuetravel\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\PowerThunder\\Desktop\\xmy\\vuetravel\\src\\views\\Login\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\PowerThunder\\Desktop\\xmy\\vuetravel\\src\\views\\Login\\Login.vue","mtime":1585115914029},{"path":"C:\\Users\\PowerThunder\\Desktop\\xmy\\vuetravel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\PowerThunder\\Desktop\\xmy\\vuetravel\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBqd3RfZGVjb2RlIGZyb20gImp3dC1kZWNvZGUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImxvZ2luIiwKICBkYXRhOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CiAgICAgIGxvZ2luVXNlcjogewogICAgICAgIHRlbDogIiIsCiAgICAgICAgcGFzc3dvcmQ6ICIiCiAgICAgIH0sCiAgICAgIGNoZWNrZWQ6IGZhbHNlCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgicGFzc3dvcmQiKSkgewogICAgICB0aGlzLmNoZWNrZWQgPSB0cnVlOwogICAgICB0aGlzLmxvZ2luVXNlci50ZWwgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidGVsIik7CiAgICAgIHRoaXMubG9naW5Vc2VyLnBhc3N3b3JkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInBhc3N3b3JkIik7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBsb2dpbigpIHsKICAgICAgbGV0IHBvam8gPSB7CiAgICAgICAgdXNlcm5hbWU6IHRoaXMubG9naW5Vc2VyLnRlbCwKICAgICAgICB1c2VycHdkOiB0aGlzLmxvZ2luVXNlci5wYXNzd29yZAogICAgICB9CiAgICAgIHRoaXMuJGF4aW9zCiAgICAgICAgLnBvc3QoIi9hcGkvbG9naW5Vc2VyIiwgcG9qbykKICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgY29uc29sZS5sb2cocmVzKQogICAgICAgICAgaWYgKHJlcy5kYXRhLmxlbmd0aCkgewogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgibXl0b2tlbiIsICJteXRva2VuaXN0cnVlIik7IC8vMS7miop0b2tlbuS/neWtmOWIsOacrOWcsOWtmOWCqAogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidHVzZXIiLCBKU09OLnN0cmluZ2lmeShyZXMuZGF0YVswXSkpOyAvLzEu5oqKdG9rZW7kv53lrZjliLDmnKzlnLDlrZjlgqgKICAgICAgICAgICAgaWYocmVzLmRhdGFbMF0udXNlcnR5cGU9PTIpewogICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvbWFuYWdlIik7IC8v6Lev55Sx6L2s5ZCR55m75b2V57uE5Lu2CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvaW5kZXgvaG9tZSIpOyAvL+i3r+eUsei9rOWQkeeZu+W9lee7hOS7tgogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLnmbvlvZXlpLHotKUiKTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnIgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICB9KTsKICAgIH0sCiAgICB0ZWxfdGlwKGZsYWcpIHsKICAgICAgdmFyIHRlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ0ZWwiKTsKICAgICAgdmFyIHNwYW4gPSB0ZWwubmV4dEVsZW1lbnRTaWJsaW5nLm5leHRFbGVtZW50U2libGluZzsKICAgICAgaWYgKGZsYWcgPT0gImZvY3VzIikgewogICAgICAgIHNwYW4uY2xhc3NOYW1lID0gInRpcE1zZyI7CiAgICAgICAgc3Bhbi5pbm5lckhUTUwgPSAi6K+36L6T5YWl5omL5py65Y+3IjsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAodGVsLnZhbHVlID09ICIiKSB7CiAgICAgICAgICBzcGFuLmNsYXNzTmFtZSA9ICJlcnJvciI7CiAgICAgICAgICBzcGFuLmlubmVySFRNTCA9ICLmiYvmnLrlj7fkuI3og73kuLrnqboiOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHB3ZF90aXAoZmxhZykgewogICAgICB2YXIgcHdkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInBhc3N3b3JkIik7CiAgICAgIHZhciBzcGFuID0gcHdkLm5leHRFbGVtZW50U2libGluZy5uZXh0RWxlbWVudFNpYmxpbmc7CiAgICAgIGlmIChmbGFnID09ICJmb2N1cyIpIHsKICAgICAgICBzcGFuLmNsYXNzTmFtZSA9ICJ0aXBNc2ciOwogICAgICAgIHNwYW4uaW5uZXJIVE1MID0gIuivt+i+k+WFpeWvhueggSI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHB3ZC52YWx1ZSA9PSAiIikgewogICAgICAgICAgc3Bhbi5jbGFzc05hbWUgPSAiZXJyb3IiOwogICAgICAgICAgc3Bhbi5pbm5lckhUTUwgPSAi5a+G56CB5LiN6IO95Li656m6IjsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views/Login","sourcesContent":["<template>\n  <div>\n    <div id=\"bg\"></div>\n    <a href=\"/index/home\">去首页</a>\n    <div id=\"content\">\n      <h1>登录</h1>\n      <form action=\"#\">\n        <div class=\"inputBox\">\n          <input\n            type=\"text\"\n            required\n            v-model=\"loginUser.tel\"\n            id=\"tel\"\n            @focus=\"tel_tip('focus')\"\n            @blur=\"tel_tip('blur')\"\n          />\n          <label for>电话号</label>\n          <span></span>\n        </div>\n        <div class=\"inputBox\">\n          <input\n            type=\"password\"\n            required\n            v-model=\"loginUser.password\"\n            id=\"password\"\n            @focus=\"pwd_tip('focus')\"\n            @blur=\"pwd_tip('blur')\"\n          />\n          <label for>密码</label>\n          <span></span>\n        </div>\n        <input type=\"button\" value=\"登录\" @click=\"login()\" />\n        <!-- `checked` 为 true 或 false -->\n        <!-- <el-checkbox v-model=\"checked\" id=\"reb\">记住密码</el-checkbox> -->\n\n        <!-- <input type=\"checkbox\" id=\"checkbox\" />\n        <label for=\"checkbox\">记住密码</label>-->\n        <!-- <a href=\"/forget_pwd\" class=\"forget\">忘记密码？</a> -->\n        <a href=\"/register\" class=\"regist\">没有账号?去注册→</a>\n      </form>\n    </div>\n  </div>\n</template>\n<script>\nimport jwt_decode from \"jwt-decode\";\nexport default {\n  name: \"login\",\n  data: function() {\n    return {\n      loginUser: {\n        tel: \"\",\n        password: \"\"\n      },\n      checked: false\n    };\n  },\n  created() {\n    if (localStorage.getItem(\"password\")) {\n      this.checked = true;\n      this.loginUser.tel = localStorage.getItem(\"tel\");\n      this.loginUser.password = localStorage.getItem(\"password\");\n    }\n  },\n  methods: {\n    login() {\n      let pojo = {\n        username: this.loginUser.tel,\n        userpwd: this.loginUser.password\n      }\n      this.$axios\n        .post(\"/api/loginUser\", pojo)\n        .then(res => {\n          console.log(res)\n          if (res.data.length) {\n            localStorage.setItem(\"mytoken\", \"mytokenistrue\"); //1.把token保存到本地存储\n            localStorage.setItem(\"tuser\", JSON.stringify(res.data[0])); //1.把token保存到本地存储\n            if(res.data[0].usertype==2){\n              this.$router.push(\"/manage\"); //路由转向登录组件\n            }else{\n              this.$router.push(\"/index/home\"); //路由转向登录组件\n            }\n          } else {\n            this.$message.error(\"登录失败\");\n          }\n        })\n        .catch(err => {\n          console.log(err);\n        });\n    },\n    tel_tip(flag) {\n      var tel = document.getElementById(\"tel\");\n      var span = tel.nextElementSibling.nextElementSibling;\n      if (flag == \"focus\") {\n        span.className = \"tipMsg\";\n        span.innerHTML = \"请输入手机号\";\n      } else {\n        if (tel.value == \"\") {\n          span.className = \"error\";\n          span.innerHTML = \"手机号不能为空\";\n        }\n      }\n    },\n    pwd_tip(flag) {\n      var pwd = document.getElementById(\"password\");\n      var span = pwd.nextElementSibling.nextElementSibling;\n      if (flag == \"focus\") {\n        span.className = \"tipMsg\";\n        span.innerHTML = \"请输入密码\";\n      } else {\n        if (pwd.value == \"\") {\n          span.className = \"error\";\n          span.innerHTML = \"密码不能为空\";\n        }\n      }\n    }\n  }\n};\n</script>\n<style scoped>\nbody {\n  font-family: sans-serif;\n  margin: 0px;\n  padding: 0px;\n}\n#bg {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-image: url(../../assets/bg.jpg);\n  background-size: cover;\n  background-repeat: no-repeat;\n  /* filter: blur(2px);  */\n}\na {\n  position: relative;\n  text-decoration: none;\n  font-size: 15px;\n  color: white;\n}\n#content {\n  width: 500px;\n  padding: 40px;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background-color: rgba(0, 0, 0, 0.5);\n  box-sizing: border-box;\n  border-radius: 10px;\n  box-shadow: 0 15px 25px rgba(0, 0, 0, 0.5);\n}\nh1 {\n  margin: 0 0 30px;\n  font-size: 30px;\n  color: #eeeeee;\n  font-weight: normal;\n  text-align: center;\n}\n.inputBox {\n  position: relative;\n  margin-bottom: 30px;\n}\n.inputBox input {\n  width: 100%;\n  padding: 10px 0px;\n  font-size: 16px;\n  color: #eeeeee;\n  border: none;\n  border-bottom: 1px solid #eeeeee;\n  background: transparent;\n  outline-style: none;\n  margin-bottom: 10px;\n}\n.inputBox label {\n  position: absolute;\n  top: 0;\n  left: 0;\n  padding: 10px 0;\n  font-size: 16px;\n  color: #eeeeee;\n  pointer-events: none;\n  transition: 0.5s;\n}\n.inputBox input:focus ~ label,\n.inputBox input:valid ~ label {\n  /*:focus获取焦点*/\n  /* :valid 需要配合required使用 当input输入内容后并失去焦点时 label任然保持以下样式  required属性规定必需在提交表单之前填写输入字段 布尔类型 。*/\n  /*~获取父元素中所有label标签*/\n  top: -30px;\n  left: 0px;\n  color: #03a9f4;\n}\n[type=\"button\"] {\n  border: none;\n  outline: none;\n  color: #fff;\n  background: #03a9f4;\n  padding: 10px 20px;\n  cursor: pointer;\n  border-radius: 5px;\n}\n.el-checkbox {\n  margin-left: 10px;\n  margin-bottom: 0px;\n  padding-top: 10px;\n}\n.forget {\n  position: absolute;\n  bottom: 60px;\n  right: 55px;\n  color: #03a9f4;\n  font-size: 13px;\n}\n.regist {\n  position: absolute;\n  bottom: 35px;\n  left: 330px;\n  color: #03a9f4;\n  font-size: 13px;\n}\nlabel {\n  color: white;\n}\n.tipMsg {\n  color: #aaa;\n}\n.error {\n  color: #f00;\n}\n</style>\n"]}]}