{"remainingRequest":"C:\\Users\\ASUS\\Desktop\\yuepai_v2\\vuetravel\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ASUS\\Desktop\\yuepai_v2\\vuetravel\\src\\views\\User\\Editor.vue?vue&type=style&index=0&id=e51680f2&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\ASUS\\Desktop\\yuepai_v2\\vuetravel\\src\\views\\User\\Editor.vue","mtime":1616331463967},{"path":"C:\\Users\\ASUS\\Desktop\\yuepai_v2\\vuetravel\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\yuepai_v2\\vuetravel\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\yuepai_v2\\vuetravel\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\yuepai_v2\\vuetravel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\yuepai_v2\\vuetravel\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKI2VkaXRvcnsKICB6LWluZGV4OiAxMDAgIWltcG9ydGFudDsKfQouZWwtbWVzc2FnZS1ib3hfX3dyYXBwZXJ7CiAgei1pbmRleDogOTk5OTk5OTk5Owp9Ci5lbC1tZXNzYWdlLWJveHsKICB6LWluZGV4OiA5OTk5OTk5OTsKfQouanVtYm90cm9uIHsKICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoIi4uLy4uL2Fzc2V0cy9iZ1BpYy9lZGl0b3JDb3Zlci5qcGciKTsKICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0OwogIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlciBjZW50ZXI7CiAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjsKfQoKI2VkaXRvciB7CiAgaGVpZ2h0OiAxMDAwcHg7CiAgLyogaGVpZ2h0OiBhdXRvOyAqLwogIHdpZHRoOiBhdXRvOwogIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7Cn0KLnctZS10b29sYmFyIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjFmMWYxOwogIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7Cn0KCi5lbC1yb3cgewogIG1hcmdpbi1ib3R0b206IDIwcHg7Cn0KLmVsLWNvbCB7CiAgYm9yZGVyLXJhZGl1czogNHB4Owp9Ci5iZy1wdXJwbGUtZGFyayB7CiAgYmFja2dyb3VuZDogIzk5YTliZjsKfQouYmctcHVycGxlIHsKICBiYWNrZ3JvdW5kOiAjZDNkY2U2Owp9Ci5iZy1wdXJwbGUtbGlnaHQgewogIGJhY2tncm91bmQ6ICNlNWU5ZjI7Cn0KLmdyaWQtY29udGVudCB7CiAgYm9yZGVyLXJhZGl1czogNHB4OwogIG1pbi1oZWlnaHQ6IDM2cHg7Cn0KLnJvdy1iZyB7CiAgcGFkZGluZzogMTBweCAwOwogIGJhY2tncm91bmQtY29sb3I6ICNmOWZhZmM7Cn0K"},{"version":3,"sources":["Editor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2WA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Editor.vue","sourceRoot":"src/views/User","sourcesContent":["<template>\n  <div>\n    <!-- 封面 -->\n    <div class=\"jumbotron\">\n      <el-container class>\n        <el-main>\n          <el-row>\n            <!-- 表单 -->\n            <el-form\n              :model=\"articleForm\"\n              :rules=\"rules\"\n              ref=\"ruleForm\"\n              class=\"demo-ruleForm\"\n            >\n              <!--elementui的上传图片的upload组件-->\n              <el-row :gutter=\"20\">\n                <el-col :span=\"12\">\n                  <div class=\"mt-3\">\n                    <h4 class=\"display-5 text-right\">设置效果封面</h4>\n                    <p class=\"lead text-right mt-5\">\n                      图片建议选择尺寸大于1680px的高清大图，如相机原图\n                    </p>\n                  </div>\n                </el-col>\n                <el-col :span=\"12\">\n                   <el-upload\n                    class=\"avatar-uploader\"\n                    ref=\"upload\"\n                    :action=\"local\"\n                    :show-file-list=\"false\"\n                    :on-success = \"uploadsucess\"\n                    :on-progress=\"uploadAva\"\n                    :data=\"uploadData\"\n                    name=\"file\">\n                    <i  style=\"height:50px;width:50px;font-size:60px\" class=\"el-icon-plus\"></i>\n                  </el-upload>\n                </el-col>\n              </el-row>\n              <el-col :span=\"12\" :offset=\"6\">\n                <el-row :gutter=\"40\">\n                  <el-col :span=\"7\">\n                    <el-form-item\n                      label=\"摄影地区\"\n                      class=\"text-right\"\n                      prop=\"type\"\n                    >\n                      <el-select\n                        v-model=\"articleForm.type\"\n                        placeholder=\"请选择地区\"\n                      >\n                        <el-option\n                          v-for=\"type in types\"\n                          :key=\"type.value\"\n                          :label=\"type.label\"\n                          :value=\"type.value\"\n                        ></el-option>\n                      </el-select>\n                    </el-form-item>\n                    <el-form-item label=\"标题\" class=\"text-right\" prop=\"title\">\n                      <el-input\n                        v-model=\"articleForm.title\"\n                        name=\"title\"\n                        style=\"width:200px;\"\n                      ></el-input>\n                    </el-form-item>\n                    <el-form-item\n                      label=\"城市名称\"\n                      class=\"text-right\"\n                      prop=\"cityName\"\n                    >\n                      <el-input\n                        v-model=\"articleForm.cityName\"\n                        name=\"cityName\"\n                        style=\"width:200px;\"\n                      ></el-input>\n                    </el-form-item>\n                  </el-col>\n                </el-row>\n                <!-- 提交按钮 -->\n                <el-row>\n                  <el-col :offset=\"3\">\n                    <el-form-item>\n                      <el-button @click=\"resetForm('ruleForm')\">重置</el-button>\n                    </el-form-item>\n                  </el-col>\n                </el-row>\n              </el-col>\n            </el-form>\n          </el-row>\n        </el-main>\n      </el-container>\n    </div>\n    <div class=\"container\">\n      <div class=\"row\">\n        <!-- 富文本框 -->\n        <div class=\"col-md-12\">\n          <div class=\"clearfix mb-5\">\n            <!-- 富文本编辑框 -->\n            <div id=\"editorMenu\"></div>\n            <div id=\"editor\" class=\"mt-3\" style=\"z-index:1\"></div>\n          </div>\n          <!-- 发表按钮 -->\n          <button\n            type=\"button\"\n            class=\"btn btn-outline-primary float-right mt-3 mb-5 mr-5\"\n            :plain=\"true\"\n            @click=\"upload('ruleForm')\"\n          >\n            发表约拍单\n          </button>\n        </div>\n        <!-- 返回顶部 -->\n        <el-backtop :bottom=\"200\"></el-backtop>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport E from \"wangeditor\";\nexport default {\n  data() {\n    return {\n      local: '/api/cover',\n      imageUrl: '',\n      imageurl2:\"\",\n      phoneEditor: \"\",\n      name: \"\",\n      uploadData: {\n        userId: localStorage.getItem('userId')\n      },\n      fileList: [],\n      articleForm: {\n        type: \"\",\n        cover: \"\",\n        title: \"\",\n        cityName: \"\",\n        dayNum: \"\",\n        season: \"\",\n        crowdType: \"\"\n      },\n      params: \"\", // 表单最后提交的参数对象\n      types: [\n        {\n          value: \"国内\",\n          label: \"国内\"\n        },\n        {\n          value: \"日本\",\n          label: \"日本\"\n        },\n        {\n          value: \"欧洲\",\n          label: \"欧洲\"\n        },\n        {\n          value: \"海岛\",\n          label: \"海岛\"\n        },\n        {\n          value: \"泰国\",\n          label: \"泰国\"\n        }\n      ],\n      days: [\n        {\n          value: \"1\",\n          label: \"一日游\"\n        },\n        {\n          value: \"2\",\n          label: \"二日游\"\n        },\n        {\n          value: \"3\",\n          label: \"三日游\"\n        },\n        {\n          value: \"4\",\n          label: \"四日游\"\n        },\n        {\n          value: \"5\",\n          label: \"五日游\"\n        },\n        {\n          value: \"7\",\n          label: \"七日游\"\n        },\n        {\n          value: \"0\",\n          label: \"多日游\"\n        }\n      ],\n      seasons: [\n        {\n          value: \"春季\",\n          label: \"春季\"\n        },\n        {\n          value: \"夏季\",\n          label: \"夏季\"\n        },\n        {\n          value: \"秋季\",\n          label: \"秋季\"\n        },\n        {\n          value: \"冬季\",\n          label: \"冬季\"\n        }\n      ],\n      crowdTypes: [\n        {\n          value: \"活力行\",\n          label: \"活力行\"\n        },\n        {\n          value: \"夕阳游\",\n          label: \"夕阳游\"\n        },\n        {\n          value: \"亲子游\",\n          label: \"亲子游\"\n        },\n        {\n          value: \"情侣游\",\n          label: \"情侣游\"\n        },\n        {\n          value: \"蜜月行\",\n          label: \"蜜月行\"\n        },\n        {\n          value: \"伙伴游\",\n          label: \"伙伴游\"\n        }\n      ],\n      rules: {\n        type: [\n          { required: true, message: \"请选择攻略类型\", trigger: \"change\" }\n        ],\n        title: [\n          { required: true, message: \"请输入标题\", trigger: \"blur\" },\n          { min: 1, max: 80, message: \"长度在 1 到 80 个字符\", trigger: \"blur\" }\n        ],\n        cityName: [\n          { required: true, message: \"请输入城市名称\", trigger: \"blur\" },\n          { min: 1, max: 16, message: \"长度在 1 到 16 个字符\", trigger: \"blur\" }\n        ],\n        dayNum: [\n          { required: true, message: \"请选择几日游\", trigger: \"change\" }\n        ],\n        season: [\n          { required: true, message: \"请选择适宜季节\", trigger: \"change\" }\n        ],\n        crowdType: [\n          { required: true, message: \"请选择面向人群\", trigger: \"change\" }\n        ]\n      }\n    };\n  },\n  created() {\n    console.log(\"Asd\")\n    var editor = null;\n  },\n  methods: {\n    uploadAva(response, file, fileList) {\n      this.imageUrl = URL.createObjectURL(file.raw);\n      $(\".jumbotron\").css(\n        \"background-image\",\n        \"url(\" + this.imageUrl + \")\"\n      );\n    },\n    uploadsucess(response, file, fileList){\n      this.imageurl2 = response\n      console.log(this.imageurl2)\n    },\n    // 重置表单按钮\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n    //当上传文件组件submit之前触发执行\n    beforeupload(file) {\n      // 准备表单上传需要的参数对象\n      console.log(file)\n      this.param = new FormData();\n      this.params.append(`cover`, file);\n      return true;\n    },\n    // 设置保存发送后台数据事件\n    upload(formName) {\n      let tuser =JSON.parse(localStorage.getItem(\"tuser\")) \n      if(!localStorage.getItem(\"mytoken\")){\n         this.$message({\n            showClose: true,\n            message: \"用户未登录\",\n            type: \"success\"\n          });\n          return;\n      }\n      let _this = this;\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          this.params = new FormData();\n          this.params.append(\"article\", this.phoneEditor.txt.html());\n          this.params.append(\"type\", this.articleForm.type);\n          this.params.append(\"title\", this.articleForm.title);\n          this.params.append(\"cityName\", this.articleForm.cityName);\n          this.params.append(\"dayNum\", this.articleForm.dayNum);\n          this.params.append(\"season\", this.articleForm.season);\n          this.params.append(\"crowdType\", this.articleForm.crowdType);\n          let data = {\n            rowname:this.articleForm.title,\n            content:this.phoneEditor.txt.html(),\n            place: this.articleForm.type,\n            address:this.articleForm.cityName,\n            prCollectionNum: 1,\n            userid:tuser.id,\n            url:this.imageurl2\n          }\n          console.log(data)\n          let thatt =this\n          // this.$refs.upload.submit();\n          //设置提交请求头，适用于上传文件\n         this.$axios\n          .post(\"/api/addrow\",data)\n          .then(res => {\n               this.$alert('恭喜你，发布成功！', '温馨提示', {\n              confirmButtonText: '确定',\n              callback: action => {\n                  \n                  }\n            });\n           \n          })\n          .catch(err => {\n            console.log(\"错误信息\" + err);\n          })\n          \n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    }\n  },\n  mounted() {\n    // wangeditor\n    this.phoneEditor = new E(\"#editorMenu\", \"#editor\");\n    // 上传图片到服务器，base64形式\n    this.phoneEditor.customConfig.uploadImgShowBase64 = true;\n    this.phoneEditor.customConfig.uploadImgServer = \"/api/cover2/\";\n    this.phoneEditor.customConfig.uploadFileName = 'files'\n    // 隐藏网络图片\n    this.phoneEditor.customConfig.showLinkImg = true;\n    // 创建一个富文本编辑器\n    this.phoneEditor.create();\n    // 富文本内容\n    this.phoneEditor.txt.html();\n  }\n};\n</script>\n<style scoped>\n#editor{\n  z-index: 100 !important;\n}\n.el-message-box__wrapper{\n  z-index: 999999999;\n}\n.el-message-box{\n  z-index: 99999999;\n}\n.jumbotron {\n  background-image: url(\"../../assets/bgPic/editorCover.jpg\");\n  background-repeat: no-repeat;\n  background-position: center center;\n  background-size: cover;\n}\n\n#editor {\n  height: 1000px;\n  /* height: auto; */\n  width: auto;\n  border: 1px solid #ccc;\n}\n.w-e-toolbar {\n  background-color: #f1f1f1;\n  border: 1px solid #ccc;\n}\n\n.el-row {\n  margin-bottom: 20px;\n}\n.el-col {\n  border-radius: 4px;\n}\n.bg-purple-dark {\n  background: #99a9bf;\n}\n.bg-purple {\n  background: #d3dce6;\n}\n.bg-purple-light {\n  background: #e5e9f2;\n}\n.grid-content {\n  border-radius: 4px;\n  min-height: 36px;\n}\n.row-bg {\n  padding: 10px 0;\n  background-color: #f9fafc;\n}\n</style>\n"]}]}