{"remainingRequest":"C:\\Users\\ASUS\\Desktop\\应用\\STUDY\\毕业设计(终)\\摄影约拍前后端实现(终)\\vuetravel\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ASUS\\Desktop\\应用\\STUDY\\毕业设计(终)\\摄影约拍前后端实现(终)\\vuetravel\\src\\views\\User\\children\\UserArticle.vue?vue&type=style&index=0&id=5da4a1f5&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\ASUS\\Desktop\\应用\\STUDY\\毕业设计(终)\\摄影约拍前后端实现(终)\\vuetravel\\src\\views\\User\\children\\UserArticle.vue","mtime":1583230001000},{"path":"C:\\Users\\ASUS\\Desktop\\应用\\STUDY\\毕业设计(终)\\摄影约拍前后端实现(终)\\vuetravel\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\应用\\STUDY\\毕业设计(终)\\摄影约拍前后端实现(终)\\vuetravel\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\应用\\STUDY\\毕业设计(终)\\摄影约拍前后端实现(终)\\vuetravel\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\应用\\STUDY\\毕业设计(终)\\摄影约拍前后端实现(终)\\vuetravel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\应用\\STUDY\\毕业设计(终)\\摄影约拍前后端实现(终)\\vuetravel\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi51bnJlYWQgewogIHdpZHRoOiA4MjVweDsKICBoZWlnaHQ6IDIxMHB4OwogIGJhY2tncm91bmQ6IHJnYmEoMTksIDE5LCAxOSwgMC41KTsKICBtYXJnaW46IDhweCAwcHg7CiAgbWFyZ2luLXRvcDogMDsKICBib3JkZXItcmFkaXVzOiA1cHg7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogMDsKICBsZWZ0OiAwOwogIGZvbnQtc2l6ZTogMTAwcHg7Cn0KLnVucmVhZCBpIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiA1MCU7CiAgbGVmdDogNTAlOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogIGNvbG9yOiByZ2IoMjQ2LCAyNDUsIDIzNik7Cn0KLnVucmVhZDpob3ZlciB7CiAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjUpOwp9CmgzIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiA1MCU7CiAgbGVmdDogNTAlOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogIGNvbG9yOiAjY2NjOwp9Ci5ibG9jayB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGJvdHRvbTogMDsKICBsZWZ0OiA1MCU7CiAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgMCk7Cn0KI2FydGljbGUgaW1nOmZpcnN0LWNoaWxkIHsKICB3aWR0aDogMTNyZW07CiAgaGVpZ2h0OiAxMXJlbTsKfQouY2FyZC1ib2R5IHsKICBwYWRkaW5nLWJvdHRvbTogMDsKICB3aWR0aDogMTByZW07CiAgaGVpZ2h0OiA1cmVtOwp9Ci50ZXh0LW11dGVkIHsKICBtYXJnaW46IDA7Cn0KLyogLnRleHQtbXV0ZWQgaW1nIHsKICB3aWR0aDogMjBweDsKICBoZWlnaHQ6IDIwcHg7Cn0gKi8KLmNhcmQgewogIGNvbG9yOiAjNjY2Owp9Ci5jYXJkIGEgewogIGZvbnQtc2l6ZTogMjBweDsKICBjb2xvcjogIzMzMzsKfQouY2FyZDpob3ZlciBhIHsKICBjb2xvcjogI2ZmOWQwMDsKfQojZGVsQnRuIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgdG9wOiAtMXJlbTsKfQo="},{"version":3,"sources":["UserArticle.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserArticle.vue","sourceRoot":"src/views/User/children","sourcesContent":["<template>\n  <div>\n    <div v-if=\"show\">\n      <div class=\"card-deck flex-column\" id=\"article\">\n        <div\n          class=\"card d-flex flex-row mb-2 shadow-sm p-3 bg-white rounded  \"\n          v-for=\"article in articles.slice(\n            (currentPage - 1) * pagesize,\n            currentPage * pagesize\n          )\"\n          :key=\"article.strategyId\"\n        >\n          <img\n            class=\"card-img-top\"\n            :src=\"getPic(article.cover)\"\n            alt=\"article image\"\n          />\n          <div class=\"unread\" v-if=\"article.ssStutas == -4\">\n            <i class=\"el-icon-lock\"></i>\n          </div>\n          <div class=\"card-body\">\n            <a\n              @click=\"go(article.type, article.strategyId)\"\n              class=\"card-title\"\n              style=\"cursor:pointer;\"\n              >{{ article.title }} {{ article.ssStatus }}</a\n            >\n            <el-button\n              type=\"danger\"\n              icon=\"el-icon-delete\"\n              @click=\"delArticle(article.type, article.strategyId)\"\n              circle\n              class=\"float-right\"\n              id=\"delBtn\"\n            ></el-button>\n            <p\n              class=\"card-text overflow-hidden\"\n              style=\"display:-webkit-box;-webkit-line-clamp:3; -webkit-box-orient:vertical; overflow:hidden;height:100px;\"\n              v-html=\"article.ssInfo\"\n            ></p>\n            <p class=\"text-muted\">\n              <i class=\"fa fa-map-marker mr-2\" aria-hidden=\"true\">{{\n                article.cityName\n              }}</i>\n              <i class=\"el-icon-star-off mr-2\">{{ article.ssCollectionNum }}</i>\n              <i\n                class=\"fa fa-thumbs-o-up mr-2 float-right\"\n                aria-hidden=\"true\"\n                >{{ article.ssLikeNum }}</i\n              >\n            </p>\n          </div>\n        </div>\n      </div>\n      <!-- 分页 -->\n      <div class=\"block\">\n        <el-pagination\n          :page-size=\"pagesize\"\n          :pager-count=\"11\"\n          layout=\"prev, pager, next\"\n          :total=\"allPage\"\n          @current-change=\"current_change\"\n        ></el-pagination>\n      </div>\n    </div>\n    <div v-else>\n      <h3>快去分享你的快乐吧~</h3>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  name: \"UserArticle\",\n  data() {\n    return {\n      articles: [{}],\n      currentPage: 1,\n      allPage: 0,\n      pagesize: 4,\n      show: true\n    };\n  },\n  created() {\n    // 查询用户攻略\n    this.$axios\n      .post(\"http://localhost:3000/userCenter/userArticle\")\n      .then(res => {\n        if (res.data.data) {\n          this.show = true;\n          this.articles = res.data.data;\n          this.allPage = res.data.data.length;\n\n          console.log(this.articles);\n        } else {\n          this.show = false;\n        }\n      })\n      .catch(err => {\n        console.log(\"错误信息\" + err);\n      })\n      .finally(function() {\n        // always executed\n      });\n  },\n  methods: {\n    getPic(pic) {\n      //给图片名加上服务器端访问路径\n      if (pic == \"cover\" || pic == null) {\n        pic = \"primaryCover.jpg\";\n      }\n      let path = \"http://localhost:3000/coverPic/\" + pic;\n      return path;\n    },\n    getHeadPic(pic) {\n      //给图片名加上服务器端访问路径\n      let path = \"\";\n      if (pic == null || pic == \"\" || pic == \"headPic\") {\n        pic = \"primaryHead.jpeg\";\n      }\n      path = \"http://localhost:3000/uploadHeadPic/\" + pic;\n      return path;\n    },\n    go(type, id) {\n      var strategy = { type, id };\n      var info = JSON.stringify(strategy);\n      sessionStorage.setItem(\"info\", info);\n      window.open(\"/index/FVstrategy\");\n    },\n    current_change(currentPage) {\n      this.currentPage = currentPage;\n    },\n    delArticle(type, strategyId) {\n      this.$axios\n        .post(\"http://localhost:3000/userCenter/delArticle\", {\n          type: type,\n          strategyId: strategyId\n        })\n        .then(res => {\n          this.$message({\n            showClose: true,\n            message: \"删除攻略成功！\",\n            type: \"success\"\n          });\n          for (var i = 0; i < this.articles.length; i++) {\n            if (this.articles[i].strategyId == strategyId) {\n              this.articles.splice(i, 1);\n              this.allPage = this.articles.length;\n            }\n          }\n          if (this.articles.length == 0) {\n            this.show = false;\n          }\n        })\n        .catch(err => {\n          console.log(\"错误信息\" + err);\n          this.$message({\n            showClose: true,\n            message: \"出错啦！删除失败！\",\n            type: \"error\"\n          });\n        })\n        .finally(function() {\n          // always executed\n        });\n    }\n  }\n};\n</script>\n<style scoped>\n.unread {\n  width: 825px;\n  height: 210px;\n  background: rgba(19, 19, 19, 0.5);\n  margin: 8px 0px;\n  margin-top: 0;\n  border-radius: 5px;\n  position: absolute;\n  top: 0;\n  left: 0;\n  font-size: 100px;\n}\n.unread i {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  color: rgb(246, 245, 236);\n}\n.unread:hover {\n  background: rgba(0, 0, 0, 0.5);\n}\nh3 {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  color: #ccc;\n}\n.block {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translate(-50%, 0);\n}\n#article img:first-child {\n  width: 13rem;\n  height: 11rem;\n}\n.card-body {\n  padding-bottom: 0;\n  width: 10rem;\n  height: 5rem;\n}\n.text-muted {\n  margin: 0;\n}\n/* .text-muted img {\n  width: 20px;\n  height: 20px;\n} */\n.card {\n  color: #666;\n}\n.card a {\n  font-size: 20px;\n  color: #333;\n}\n.card:hover a {\n  color: #ff9d00;\n}\n#delBtn {\n  position: relative;\n  top: -1rem;\n}\n</style>\n"]}]}