{"remainingRequest":"C:\\Users\\ASUS\\Desktop\\应用\\STUDY\\毕业设计(终)\\摄影约拍前后端实现(终)\\vuetravel\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ASUS\\Desktop\\应用\\STUDY\\毕业设计(终)\\摄影约拍前后端实现(终)\\vuetravel\\src\\views\\Login\\Forget_pwd.vue?vue&type=style&index=0&id=0300682b&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\ASUS\\Desktop\\应用\\STUDY\\毕业设计(终)\\摄影约拍前后端实现(终)\\vuetravel\\src\\views\\Login\\Forget_pwd.vue","mtime":1583230001000},{"path":"C:\\Users\\ASUS\\Desktop\\应用\\STUDY\\毕业设计(终)\\摄影约拍前后端实现(终)\\vuetravel\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\应用\\STUDY\\毕业设计(终)\\摄影约拍前后端实现(终)\\vuetravel\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\应用\\STUDY\\毕业设计(终)\\摄影约拍前后端实现(终)\\vuetravel\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\应用\\STUDY\\毕业设计(终)\\摄影约拍前后端实现(终)\\vuetravel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\应用\\STUDY\\毕业设计(终)\\摄影约拍前后端实现(终)\\vuetravel\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgojYmcgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDEwMCU7CiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKC4uLy4uL2Fzc2V0cy9iZy5qcGcpOwogIGJhY2tncm91bmQtc2l6ZTogY292ZXI7CiAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsKICAvKiBmaWx0ZXI6IGJsdXIoMnB4KTsgICovCn0KI2NvbnRlbnQgewogIHdpZHRoOiA5NTBweDsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiA0MCU7CiAgbGVmdDogNTAlOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwp9CmFydGljbGUgewogIGZsb2F0OiBsZWZ0OwogIGNvbG9yOiB3aGl0ZTsKICBtYXJnaW4tcmlnaHQ6IDUwcHg7CiAgZm9udC13ZWlnaHQ6IGxpZ2h0ZXI7Cn0KYXJ0aWNsZSBzcGFuIHsKICBmb250LXNpemU6IDQwcHg7CiAgZGlzcGxheTogYmxvY2s7Cn0KYXJ0aWNsZSBzcGFuIGEgewogIGZvbnQtc2l6ZTogMjBweDsKICBjb2xvcjogI2RkYjZjNjsKfQphOmhvdmVyIHsKICB0ZXh0LWRlY29yYXRpb246IG5vbmU7CiAgY29sb3I6ICNmMWQ0ZDQ7Cn0KYXNpZGUgewogIGZsb2F0OiBsZWZ0Owp9CmFzaWRlIGRpdiB7CiAgbWFyZ2luLXRvcDogMjBweDsKfQpbdHlwZT0idGV4dCJdLApbdHlwZT0icGFzc3dvcmQiXSB7CiAgZm9udC1zaXplOiAxOHB4OwogIHBhZGRpbmc6IDAgMzBweDsKICBjb2xvcjogI2VlZTsKICBtYXJnaW4tdG9wOiAxNXB4OwogIGhlaWdodDogMzJweDsKICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsKICBvdXRsaW5lLXN0eWxlOiBub25lOwogIGJvcmRlcjogMDsKICBib3JkZXItYm90dG9tOiAycHggc29saWQgI2FjOGRhZjsKfQphc2lkZSBbdHlwZT0iYnV0dG9uIl0gewogIGhlaWdodDogMzdweDsKICB3aWR0aDogMTMwcHg7CiAgbWFyZ2luLWxlZnQ6IDEwcHg7CiAgYm9yZGVyOiAxcHggc29saWQgIzQ4NGM3ZjsKICBib3JkZXItcmFkaXVzOiAzcHg7CiAgYmFja2dyb3VuZC1jb2xvcjogIzQ4NGM3ZjsKICBjb2xvcjogd2hpdGU7CiAgb3V0bGluZTogbm9uZTsKfQouaW5wdXQ6Zm9jdXMgewogIGJvcmRlci1ib3R0b20tY29sb3I6ICNkZGI2YzY7Cn0KaW5wdXQ6Oi13ZWJraXQtaW5wdXQtcGxhY2Vob2xkZXIgewogIC8qIFdlYktpdCBicm93c2VycyDpgILphY3osLfmrYwgKi8KICBjb2xvcjogI2VlZTsKfQphc2lkZSBkaXYgfiBbdHlwZT0iYnV0dG9uIl0gewogIG1hcmdpbi1sZWZ0OiAwOwogIGhlaWdodDogNTBweDsKICB3aWR0aDogMjUwcHg7CiAgbWFyZ2luLXRvcDogNTBweDsKfQoudGlwTXNnIHsKICBjb2xvcjogI2FhYTsKfQovKiDplJnor6/mj5DnpLrkv6Hmga/moLflvI8gKi8KLmVycm9yIHsKICBwYWRkaW5nLWxlZnQ6IDEwcHg7CiAgY29sb3I6ICNmMDA7Cn0K"},{"version":3,"sources":["Forget_pwd.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Forget_pwd.vue","sourceRoot":"src/views/Login","sourcesContent":["<template>\n  <div>\n    <div id=\"bg\"></div>\n    <div id=\"content\">\n      <article>\n        <span>通过手机号找回</span>\n        <span>\n          <a href=\"/login\">⇠已有账号，直接登录</a>\n        </span>\n      </article>\n      <aside v-if=\"flag1\">\n        <input\n          class=\"input\"\n          type=\"text\"\n          placeholder=\"请输入手机号\"\n          size=\"40px\"\n          v-model=\"forget_pwd.tel\"\n          id=\"tel\"\n          @blur=\"test()\"\n        />\n        <span class=\"tipMsg\"></span>\n        <div>\n          <input\n            class=\"input\"\n            type=\"text\"\n            placeholder=\"请输入验证码\"\n            size=\"20px\"\n            v-model=\"forget_pwd.code\"\n            id=\"message\"\n            @blur=\"test_msg()\"\n          />\n          <input\n            type=\"button\"\n            value=\"发送验证码\"\n            @click=\"sendMessage()\"\n            id=\"check\"\n          />\n          <span class=\"tipMsg\"></span>\n        </div>\n        <input type=\"button\" value=\"找回密码\" @click=\"findPwd()\" />\n      </aside>\n      <aside v-if=\"flag2\">\n        <input\n          type=\"password\"\n          placeholder=\"设置新密码\"\n          size=\"30px\"\n          v-model=\"forget_pwd.password\"\n          id=\"pwd\"\n          @focus=\"pwd_tip('focus')\"\n          @blur=\"pwd_tip('blur')\"\n        />\n        <span class=\"tipMsg\"></span>\n        <div>\n          <input\n            type=\"password\"\n            placeholder=\"确认新密码\"\n            size=\"30px\"\n            v-model=\"forget_pwd.password2\"\n            id=\"pwd2\"\n            @focus=\"pwdcheck_tip('focus')\"\n            @blur=\"pwdcheck_tip('blur')\"\n          />\n          <span class=\"tipMsg\"></span>\n        </div>\n        <input type=\"button\" value=\"确认修改\" @click=\"setNewPwd()\" />\n      </aside>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  name: \"Forget_pwd\",\n  data: function() {\n    return {\n      forget_pwd: {\n        tel: \"\",\n        code: \"\",\n        type: \"1\",\n        password: \"\",\n        password2: \"\"\n      },\n      code: null,\n      flag1: true,\n      flag2: false,\n      ispasswordOK: false,\n      iscpasswordOK: false\n    };\n  },\n  methods: {\n    sendMessage() {\n      if (this.forget_pwd.tel) {\n        console.log(this.forget_pwd.tel);\n        this.$axios\n          .post(\"http://localhost:3000/regist/getVode\", this.forget_pwd)\n          .then(res => {\n            console.log(res);\n            if (res.data.data) {\n              this.$message({\n                message: res.data.msg,\n                type: \"success\"\n              });\n              this.code = res.data.data;\n              var check = document.getElementById(\"check\");\n              var timmer = 120;\n              var timer = window.setInterval(function() {\n                check.value = timmer-- + \"秒后重新获取\";\n                if (timmer == -2) {\n                  timmer = 0;\n                  check.value = \"获取验证码\";\n                  check.disabled = false;\n                  console.log(check.disabled);\n                  check.style.backgroundColor = \"#03a9f4\";\n                  clearInterval(timer);\n                } else {\n                  check.disabled = true;\n                }\n                if (check.disabled) {\n                  check.style.backgroundColor = \"#aaa\";\n                }\n              }, 1000);\n            } else {\n              this.$message.error(res.data.msg);\n            }\n          })\n          .catch(err => {\n            console.log(err);\n          });\n      } else {\n        this.$message.error(\"请输入手机号码\");\n        var telephone = document.getElementById(\"tel\");\n        var span = telephone.nextElementSibling;\n        span.className = \"error\";\n        span.innerHTML = \"不能为空\";\n        this.value = \"\";\n      }\n    },\n    findPwd() {\n      if (this.forget_pwd.tel == \"\") {\n        var tel = document.getElementById(\"tel\");\n        var span = tel.nextElementSibling;\n        span.className = \"error\";\n        span.innerHTML = \"手机号不能为空\";\n      } else {\n        if (this.code == this.forget_pwd.code) {\n          (this.flag1 = false), (this.flag2 = true);\n        } else {\n          var message = document.getElementById(\"message\");\n          var span = message.nextElementSibling;\n          span.className = \"error\";\n          span.innerHTML = \"验证码不正确\";\n        }\n      }\n    },\n    test() {\n      var tel = document.getElementById(\"tel\");\n      var tel_num = tel.value.trim();\n      var telReg = /^1(3|4|5|7|8)\\d{9}$/;\n      var res = telReg.test(tel.value);\n      var span = tel.nextElementSibling;\n      if (tel_num == \"\") {\n        span.className = \"error\";\n        span.innerHTML = \"手机号不能为空\";\n      } else if (!res) {\n        span.className = \"error\";\n        span.innerHTML = \"请输入正确的手机号\";\n      } else {\n        span.innerHTML = \" \";\n      }\n    },\n    test_msg() {\n      var msg = document.getElementById(\"message\");\n      var message = msg.value.trim();\n      var span = msg.nextElementSibling.nextElementSibling;\n      if (message == \"\") {\n        span.className = \"error\";\n        span.innerHTML = \"验证码不能为空\";\n      } else if (message != this.code) {\n        span.className = \"error\";\n        span.innerHTML = \"验证码不正确\";\n      } else {\n        span.innerHTML = \"\";\n      }\n    },\n    pwd_tip(flag) {\n      var pwd = document.getElementById(\"pwd\");\n      if (flag == \"focus\") {\n        var span = pwd.nextElementSibling;\n        span.className = \"tipMsg\";\n        span.innerHTML = \"密码必须英文+数字，长度8至15位\";\n      } else {\n        var pw = pwd.value.trim();\n        if (pw == \"\") {\n          var span = pwd.nextElementSibling;\n          span.className = \"error\";\n          span.innerHTML = \"密码不能为空\";\n          pwd.value = \"\";\n          this.ispasswordOK = false;\n          return;\n        }\n        var pwReg = /^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]+$/;\n        var res = pwReg.test(pw);\n        if (!res) {\n          var span = pwd.nextElementSibling;\n          span.className = \"error\";\n          span.innerHTML = \"密码必须英文+数字\";\n          pwd.value = \"\";\n          this.ispasswordOK = false;\n          return;\n        }\n        var pwleng = 0;\n        for (var i = 0; i < pw.length; i++) {\n          pwleng++;\n          if (pwleng > 15) {\n            var span = pwd.nextElementSibling;\n            span.className = \"error\";\n            span.innerHTML = \"密码不能超过15位！\";\n            pwd.value = \"\";\n            this.ispasswordOK = false;\n            return;\n          }\n        }\n        if (pwleng < 8) {\n          var span = pwd.nextElementSibling;\n          span.className = \"error\";\n          span.innerHTML = \"密码不能低于8位！\";\n          pwd.value = \"\";\n          return;\n        } else {\n          var span = pwd.nextElementSibling;\n          span.className = \"success\";\n          span.innerHTML = \" \";\n          this.ispasswordOK = true;\n        }\n      }\n    },\n    pwdcheck_tip(flag) {\n      var pwd = document.getElementById(\"pwd\");\n      var pwd2 = document.getElementById(\"pwd2\");\n      if (flag == \"focus\") {\n        var span = pwd2.nextElementSibling;\n        span.className = \"tipMsg\";\n        span.innerHTML = \"确认密码\";\n      } else {\n        var pw = pwd.value;\n        var cpw = pwd2.value.trim();\n        if (cpw == \"\") {\n          var span = pwd2.nextElementSibling;\n          span.className = \"error\";\n          span.innerHTML = \"不能为空\";\n          pwd2.value = \"\";\n          return;\n          this.iscpasswordOK = false;\n        }\n        if (cpw != pw) {\n          var span = pwd2.nextElementSibling;\n          span.className = \"error\";\n          span.innerHTML = \"两次输入的密码不同，请重新输入\";\n          pwd2.value = \"\";\n          this.iscpasswordOK = false;\n          return;\n        } else {\n          var span = pwd2.nextElementSibling;\n          span.className = \"success\";\n          span.innerHTML = \" \";\n          this.iscpasswordOK = true;\n        }\n      }\n    },\n    setNewPwd() {\n      if (this.ispasswordOK && this.iscpasswordOK) {\n        this.$axios\n          .post(\"http://localhost:3000/login/forgetPwd\", this.forget_pwd)\n          .then(res => {\n            console.log(res);\n            if (res.data.data) {\n              this.$message({\n                message: res.data.msg,\n                type: \"success\"\n              });\n              let _this = this;\n              var mytime = setTimeout(function() {\n                //  window.location=\"/login\";\n                _this.$router.push(\"/login\");\n              }, 3000);\n            } else {\n              this.$message.error(\"错误信息：\" + res.data.msg);\n            }\n          })\n          .catch(err => {\n            console.log(err);\n          });\n      } else {\n        this.$message.error(\"错误信息：请填写正确的密码\");\n      }\n    }\n  }\n};\n</script>\n<style scoped>\n#bg {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-image: url(../../assets/bg.jpg);\n  background-size: cover;\n  background-repeat: no-repeat;\n  /* filter: blur(2px);  */\n}\n#content {\n  width: 950px;\n  position: absolute;\n  top: 40%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\narticle {\n  float: left;\n  color: white;\n  margin-right: 50px;\n  font-weight: lighter;\n}\narticle span {\n  font-size: 40px;\n  display: block;\n}\narticle span a {\n  font-size: 20px;\n  color: #ddb6c6;\n}\na:hover {\n  text-decoration: none;\n  color: #f1d4d4;\n}\naside {\n  float: left;\n}\naside div {\n  margin-top: 20px;\n}\n[type=\"text\"],\n[type=\"password\"] {\n  font-size: 18px;\n  padding: 0 30px;\n  color: #eee;\n  margin-top: 15px;\n  height: 32px;\n  background-color: transparent;\n  outline-style: none;\n  border: 0;\n  border-bottom: 2px solid #ac8daf;\n}\naside [type=\"button\"] {\n  height: 37px;\n  width: 130px;\n  margin-left: 10px;\n  border: 1px solid #484c7f;\n  border-radius: 3px;\n  background-color: #484c7f;\n  color: white;\n  outline: none;\n}\n.input:focus {\n  border-bottom-color: #ddb6c6;\n}\ninput::-webkit-input-placeholder {\n  /* WebKit browsers 适配谷歌 */\n  color: #eee;\n}\naside div ~ [type=\"button\"] {\n  margin-left: 0;\n  height: 50px;\n  width: 250px;\n  margin-top: 50px;\n}\n.tipMsg {\n  color: #aaa;\n}\n/* 错误提示信息样式 */\n.error {\n  padding-left: 10px;\n  color: #f00;\n}\n</style>\n"]}]}