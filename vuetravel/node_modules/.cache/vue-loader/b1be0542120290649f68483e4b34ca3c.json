{"remainingRequest":"C:\\Users\\ASUS\\Desktop\\yuepai_v2\\vuetravel\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ASUS\\Desktop\\yuepai_v2\\vuetravel\\src\\views\\takephoner\\index.vue?vue&type=style&index=0&id=60c262e8&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\ASUS\\Desktop\\yuepai_v2\\vuetravel\\src\\views\\takephoner\\index.vue","mtime":1616487450335},{"path":"C:\\Users\\ASUS\\Desktop\\yuepai_v2\\vuetravel\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\yuepai_v2\\vuetravel\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\yuepai_v2\\vuetravel\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\yuepai_v2\\vuetravel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\yuepai_v2\\vuetravel\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQovZGVlcC8gLnNjLWNoYXQtd2luZG93ew0KICB6LWluZGV4OiA5OTk7DQp9DQouc2MtbWVzc2FnZS0tdGV4dC1jb250ZW50ew0KICBtYXJnaW4tYm90dG9tOiAwOw0KfQ0KKiB7DQogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQp9DQoNCmJvZHkgew0KICBwYWRkaW5nOiAwOw0KICBtYXJnaW46IDA7DQp9DQoNCmEgew0KICB0ZXh0LWRlY29yYXRpb246IG5vbmU7DQp9DQoNCi5tdC01IHsNCiAgbWFyZ2luLXRvcDogNXJlbTsNCn0NCg0KLm91ci1ibG9nIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZjlmYTsNCiAgcGFkZGluZzogMTAwcHggMDsNCn0NCg0KLmNvbnRhaW5lciB7DQogIG1heC13aWR0aDogOTYwcHg7DQogIG1hcmdpbjogMCBhdXRvOw0KfQ0KDQoucm93IHsNCiAgZGlzcGxheTogZmxleDsNCiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogIGZsZXgtd3JhcDogd3JhcDsNCn0NCg0KLnRleHQtY2VudGVyIHsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KICBmb250LXNpemU6IDE4cHg7DQp9DQoNCi50ZXh0LWNlbnRlciBoMiB7DQogIGZvbnQtd2VpZ2h0OiA1MDA7DQogIGZvbnQtc2l6ZTogMS42ZW07DQp9DQoNCi50ZXh0LWNlbnRlciBoMiBzcGFuIHsNCiAgZm9udC13ZWlnaHQ6IDgwMDsNCn0NCg0KLnRleHQtY2VudGVyIHAgew0KICBtYXJnaW46IDAgYXV0bzsNCiAgY29sb3I6ICM2Yzc1N2Q7DQogIGxpbmUtaGVpZ2h0OiAxLjU7DQogIGZvbnQtc2l6ZTogMWVtOw0KfQ0KDQouY29sIHsNCiAgd2lkdGg6IDI3M3B4Ow0KICBvdmVyZmxvdzogaGlkZGVuOw0KICBwYWRkaW5nOiAxNXB4Ow0KICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogIHotaW5kZXg6IDA7DQp9DQoNCi5jb2wgLmNhcmQgew0KICB3aWR0aDogMTAwJTsNCiAgYm94LXNoYWRvdzogMHB4IDBweCAyMHB4IHJnYmEoMCwgMCwgMCwgMC4yKTsNCiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuM3MgZWFzZTsNCn0NCg0KLmNvbCBpbWcgew0KICB3aWR0aDogMTAwJTsNCiAgaGVpZ2h0OiBhdXRvOw0KICBib3JkZXI6IDA7DQogIGhlaWdodDogMTgwcHg7DQp9DQoNCi5jb2wgLmNhcmQtYm9keSB7DQogIHBhZGRpbmc6IDAgMTVweCAxNXB4IDE1cHg7DQogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7DQogIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDE1cHg7DQogIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiAxNXB4Ow0KfQ0KDQouY2FyZC1ib2R5IGg1IHsNCiAgZm9udC1zaXplOiAyNHB4Ow0KICBtYXJnaW46IDdweCAwOw0KfQ0KDQouY2FyZCBwIHsNCiAgY29sb3I6ICM2Yzc1N2Q7DQp9DQoNCg0KLmNhcmQtYm9keSAuZGF0ZS1hdXRob3Igew0KICBjb2xvcjogI2U3NGMzYzsNCg0KICBvdmVyZmxvdzogaGlkZGVuOw0KICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsNCiAgd2hpdGUtc3BhY2U6IG5vd3JhcDsNCn0NCg0KLmNhcmQtYm9keSBoNSBhIHsNCiAgY29sb3I6ICMyMjI7DQp9DQoNCkBtZWRpYSAobWluLXdpZHRoOiA1NzdweCkgYW5kIChtYXgtd2lkdGg6IDc2OHB4KSB7DQogIC5jb2wgew0KICAgIHdpZHRoOiA1MCU7DQogIH0NCn0NCg0KQG1lZGlhIChtYXgtd2lkdGg6IDU3NnB4KSB7DQogIC5jb2wgew0KICAgIHdpZHRoOiAxMDAlOw0KICB9DQp9DQouY2FyZC10ZXh0IHsNCiAgbWFyZ2luLWJvdHRvbTogMDsNCiAgYmFja2dyb3VuZDogI2VmZWFlNDsNCiAgcGFkZGluZzogNXB4IDIwcHg7DQogIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgbWFyZ2luOiAxMHB4Ow0KICBjdXJzb3I6IHBvaW50ZXI7DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4TA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/takephoner","sourcesContent":["<template>\r\n  <div style=\"width: 80vw; margin-left: 10vw\">\r\n    <div style=\"width: 100%; display: inline-block\">\r\n       <beautiful-chat\r\n      :participants=\"participants\"\r\n      :titleImageUrl=\"titleImageUrl\"\r\n      :onMessageWasSent=\"onMessageWasSent\"\r\n      :messageList=\"messageList\"\r\n      :newMessagesCount=\"newMessagesCount\"\r\n      :isOpen=\"isChatOpen\"\r\n      :close=\"closeChat\"\r\n      :icons=\"icons\"\r\n      :open=\"openChat\"\r\n      :showEmoji=\"true\"\r\n      :showFile=\"true\"\r\n      :showEdition=\"true\"\r\n      :showDeletion=\"true\"\r\n      :showTypingIndicator=\"showTypingIndicator\"\r\n      :showLauncher=\"true\"\r\n      :showCloseButton=\"true\"\r\n      :colors=\"colors\"\r\n      :alwaysScrollToBottom=\"alwaysScrollToBottom\"\r\n      :messageStyling=\"messageStyling\"\r\n      @onType=\"handleOnType\"\r\n      @edit=\"editMessage\" />\r\n      <a>摄影师：<span>{{userobj.username}}</span>\r\n      <span style=\"margin-left:100px;\">性别：{{userobj.usersex}}</span>\r\n      </a>\r\n      <p class=\"card-text\" @click=\"openChat()\">\r\n        点击联系摄影师-></p>\r\n    </div>\r\n    <div class=\"col\" v-for=\"(item, index) in ssarticles\" :key=\"index\" >\r\n      <div class=\"card\" @click=\"godetail(item,index)\">\r\n        <img :src=\"item.posterurl\"  @click=\"godetail(item,index)\" />\r\n        <div class=\"card-body\">\r\n          <h5 class=\"card-title\">\r\n            <a @@click=\"godetail(item,index)\">{{ item.name }}</a>\r\n            <span style=\"float: right; color: burlywood\">\r\n              ￥{{ item.score }}\r\n            </span>\r\n          </h5>\r\n\r\n          <div class=\"date-author\">\r\n            {{ item.isshow }}\r\n          </div>\r\n          <p class=\"card-text\" @click=\"addcart(item)\">我要预约</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport CloseIcon from 'vue-beautiful-chat/src/assets/close-icon.png'\r\nimport OpenIcon from 'vue-beautiful-chat/src/assets/logo-no-bg.svg'\r\nimport FileIcon from 'vue-beautiful-chat/src/assets/file.svg'\r\nimport CloseIconSvg from 'vue-beautiful-chat/src/assets/close.svg'\r\nexport default {\r\n  data() {\r\n    return {\r\n      ssarticles: [],\r\n      keyWord: \"\",\r\n      icons:{\r\n        open:{\r\n          img: OpenIcon,\r\n          name: 'default',\r\n        },\r\n        close:{\r\n          img: CloseIcon,\r\n          name: 'default',\r\n        },\r\n        file:{\r\n          img: FileIcon,\r\n          name: 'default',\r\n        },\r\n        closeSvg:{\r\n          img: CloseIconSvg,\r\n          name: 'default',\r\n        },\r\n      },\r\n      participants: [\r\n        {\r\n          id: 'user1',\r\n          name: 'Matteo',\r\n          imageUrl: 'https://avatars3.githubusercontent.com/u/1915989?s=230&v=4'\r\n        },\r\n        {\r\n          id: 'user2',\r\n          name: 'Support',\r\n          imageUrl: 'https://avatars3.githubusercontent.com/u/37018832?s=200&v=4'\r\n        }\r\n      ], // the list of all the participant of the conversation. `name` is the user name, `id` is used to establish the author of a message, `imageUrl` is supposed to be the user avatar.\r\n      titleImageUrl: 'https://a.slack-edge.com/66f9/img/avatars-teams/ava_0001-34.png',\r\n      messageList: [\r\n          { type: 'text', author: `me`, data: { text: `Say yes!` } },\r\n          { type: 'text', author: `me`, data: { text: `Say yes!` } },\r\n          { type: 'text', author: `me`, data: { text: `Say yes!` } },\r\n          { type: 'text', author: `user1`, data: { text: `No.` } }\r\n      ], // the list of the messages to show, can be paginated and adjusted dynamically\r\n      newMessagesCount: 0,\r\n      isChatOpen: false, // to determine whether the chat window should be open or closed\r\n      showTypingIndicator: '', // when set to a value matching the participant.id it shows the typing indicator for the specific user\r\n      colors: {\r\n        header: {\r\n          bg: '#4e8cff',\r\n          text: '#ffffff'\r\n        },\r\n        launcher: {\r\n          bg: '#4e8cff'\r\n        },\r\n        messageList: {\r\n          bg: '#ffffff'\r\n        },\r\n        sentMessage: {\r\n          bg: '#4e8cff',\r\n          text: '#ffffff'\r\n        },\r\n        receivedMessage: {\r\n          bg: '#eaeaea',\r\n          text: '#222222'\r\n        },\r\n        userInput: {\r\n          bg: '#f4f7f9',\r\n          text: '#565867'\r\n        }\r\n      }, // specifies the color scheme for the component\r\n      alwaysScrollToBottom: false, // when set to true always scrolls the chat to the bottom when new events are in (new message, user starts typing...)\r\n      messageStyling: true,\r\n      sheyingid: 0,\r\n      userobj:{},\r\n      timer: {}\r\n    };\r\n  },\r\n  created() {\r\n    if(localStorage.getItem(\"tuser\")){\r\n      let tuser =JSON.parse(localStorage.getItem(\"tuser\")) \r\n    this.sheyingid = this.$route.params.keyWord;\r\n    this.getcontetn()\r\n    this.timer = setInterval(()=>{\r\n      this.$axios\r\n      .post(\"/api/getchatsinfo\", {\r\n          getterid:this.sheyingid,\r\n          sendid: tuser.id\r\n        })\r\n      .then((res) => {\r\n        this.messageList = []\r\n        res.data.forEach(element => {\r\n          if(element.sendid == tuser.id){\r\n            this.messageList.push({ type: 'text', author: `me`, data: { text: `${element.content}`} })\r\n          }else{\r\n            this.messageList.push({ type: 'text', author: `user1`, data: { text: `${element.content}`} })\r\n          }\r\n        }); \r\n      })\r\n      .catch((err) => {\r\n        console.log(\"错误信息\" + err);\r\n      });\r\n    },5000)\r\n    }else{\r\n      this.$router.push(\"/login\")\r\n    }\r\n    \r\n  },\r\n  methods: {\r\n    getcontetn(){\r\n      this.$axios\r\n      .post(\"/api/getUserByid\", {\r\n          id:this.sheyingid\r\n        })\r\n      .then((res) => {\r\n        this.userobj = res.data[0];\r\n      })\r\n      .catch((err) => {\r\n        console.log(\"错误信息\" + err);\r\n      });\r\n    this.$axios\r\n      .post(\"/api/getzuopingbyuserid\", {\r\n          wish:this.sheyingid\r\n        })\r\n      .then((res) => {\r\n        this.ssarticles = res.data;\r\n      })\r\n      .catch((err) => {\r\n        console.log(\"错误信息\" + err);\r\n      });\r\n    },\r\n    godetail(obj, index) {\r\n      console.log(type,id,\"---\")\r\n      var { type, id } = obj\r\n      var strategy = { type, id };\r\n      var info = JSON.stringify(strategy);\r\n      sessionStorage.setItem(\"info\", info);\r\n      this.$router.push(\"/index/fvstrategy\");\r\n    },\r\n     sendMessage (text) {\r\n      if (text.length > 0) {\r\n        this.newMessagesCount = this.isChatOpen ? this.newMessagesCount : this.newMessagesCount + 1\r\n        this.onMessageWasSent({ author: 'support', type: 'text', data: { text } })\r\n      }\r\n    },\r\n    onMessageWasSent (message) {\r\n      // called when the user sends a message\r\n      this.messageList = [ ...this.messageList, message ]\r\n      console.log(message)\r\n      let mycontent =  \"\"\r\n      if(message.type == \"emoji\"){\r\n        mycontent = message.data.emoji\r\n        return;\r\n      }else{\r\n        mycontent = message.data.text\r\n      }\r\n       let tuser =JSON.parse(localStorage.getItem(\"tuser\")) \r\n      this.$axios\r\n      .post(\"/api/addchatsinfo\", {\r\n          getterid:this.sheyingid,\r\n          sendid: tuser.id,\r\n          content: mycontent\r\n        })\r\n      .then((res) => {\r\n      })\r\n      .catch((err) => {\r\n        console.log(\"错误信息\" + err);\r\n      });\r\n      this.$axios\r\n      .post(\"/api/addlianxiinfo\", {\r\n          otherid:this.sheyingid,\r\n          myid: tuser.id,\r\n          myname: tuser.username,\r\n          othername: this.userobj.username\r\n        })\r\n      .then((res) => {\r\n      })\r\n      .catch((err) => {\r\n        console.log(\"错误信息\" + err);\r\n      });\r\n    },\r\n    openChat () {\r\n      // called when the user clicks on the fab button to open the chat\r\n       let tuser =JSON.parse(localStorage.getItem(\"tuser\")) \r\n      this.$axios\r\n      .post(\"/api/getchatsinfo\", {\r\n          getterid:this.sheyingid,\r\n          sendid: tuser.id\r\n        })\r\n      .then((res) => {\r\n        console.log(res)\r\n\r\n        this.messageList = []\r\n        res.data.forEach(element => {\r\n          if(element.sendid == tuser.id){\r\n            this.messageList.push({ type: 'text', author: `me`, data: { text: `${element.content}`} })\r\n          }else{\r\n            this.messageList.push({ type: 'text', author: `user1`, data: { text: `${element.content}`} })\r\n          }\r\n        }); \r\n      })\r\n      .catch((err) => {\r\n        console.log(\"错误信息\" + err);\r\n      });\r\n      this.isChatOpen = true\r\n      this.newMessagesCount = 0\r\n    },\r\n    closeChat () {\r\n      // called when the user clicks on the botton to close the chat\r\n      this.isChatOpen = false\r\n    },\r\n    handleScrollToTop () {\r\n      // called when the user scrolls message list to top\r\n      // leverage pagination for loading another page of messages\r\n    },\r\n    handleOnType () {\r\n      console.log('Emit typing event')\r\n    },\r\n    editMessage(message){\r\n      const m = this.messageList.find(m=>m.id === message.id);\r\n      m.isEdited = true;\r\n      m.data.text = message.data.text;\r\n    },\r\n    goSearch() {},\r\n    addcart(element) {\r\n      console.log(element);\r\n      var tuser = localStorage.getItem(\"tuser\");\r\n      if (tuser) {\r\n        tuser = JSON.parse(tuser);\r\n      } else {\r\n        this.$alert(\"你还没登录，请先登录\", \"温馨提示\", {\r\n          confirmButtonText: \"确定\",\r\n          callback: (action) => {\r\n            this.$router.push({ path: \"/login\" });\r\n          },\r\n        });\r\n      }\r\n      let that = this;\r\n      this.$axios\r\n        .post(\"/api/addCart\", {\r\n          ...element,\r\n          userid: tuser.id,\r\n        })\r\n        .then((response) => {\r\n          that.$message({\r\n            message: \"加入购物车成功！\",\r\n            type: \"success\",\r\n          });\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error);\r\n        });\r\n    },\r\n  },\r\n  beforeDestroy(){\r\n    clearInterval(this.timer) \r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/deep/ .sc-chat-window{\r\n  z-index: 999;\r\n}\r\n.sc-message--text-content{\r\n  margin-bottom: 0;\r\n}\r\n* {\r\n  box-sizing: border-box;\r\n}\r\n\r\nbody {\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n\r\na {\r\n  text-decoration: none;\r\n}\r\n\r\n.mt-5 {\r\n  margin-top: 5rem;\r\n}\r\n\r\n.our-blog {\r\n  background-color: #f8f9fa;\r\n  padding: 100px 0;\r\n}\r\n\r\n.container {\r\n  max-width: 960px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.row {\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.text-center {\r\n  text-align: center;\r\n  font-size: 18px;\r\n}\r\n\r\n.text-center h2 {\r\n  font-weight: 500;\r\n  font-size: 1.6em;\r\n}\r\n\r\n.text-center h2 span {\r\n  font-weight: 800;\r\n}\r\n\r\n.text-center p {\r\n  margin: 0 auto;\r\n  color: #6c757d;\r\n  line-height: 1.5;\r\n  font-size: 1em;\r\n}\r\n\r\n.col {\r\n  width: 273px;\r\n  overflow: hidden;\r\n  padding: 15px;\r\n  display: inline-block;\r\n  z-index: 0;\r\n}\r\n\r\n.col .card {\r\n  width: 100%;\r\n  box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.2);\r\n  transition: transform 0.3s ease;\r\n}\r\n\r\n.col img {\r\n  width: 100%;\r\n  height: auto;\r\n  border: 0;\r\n  height: 180px;\r\n}\r\n\r\n.col .card-body {\r\n  padding: 0 15px 15px 15px;\r\n  background-color: #fff;\r\n  border-bottom-left-radius: 15px;\r\n  border-bottom-right-radius: 15px;\r\n}\r\n\r\n.card-body h5 {\r\n  font-size: 24px;\r\n  margin: 7px 0;\r\n}\r\n\r\n.card p {\r\n  color: #6c757d;\r\n}\r\n\r\n\r\n.card-body .date-author {\r\n  color: #e74c3c;\r\n\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n\r\n.card-body h5 a {\r\n  color: #222;\r\n}\r\n\r\n@media (min-width: 577px) and (max-width: 768px) {\r\n  .col {\r\n    width: 50%;\r\n  }\r\n}\r\n\r\n@media (max-width: 576px) {\r\n  .col {\r\n    width: 100%;\r\n  }\r\n}\r\n.card-text {\r\n  margin-bottom: 0;\r\n  background: #efeae4;\r\n  padding: 5px 20px;\r\n  text-align: center;\r\n  margin: 10px;\r\n  cursor: pointer;\r\n}\r\n</style>"]}]}